// ** @ K


 var quiztitle = "Free Practice Test 4";

// Question and choices (image question)
 
 var quiz = [
 
  {
    "question": "If the signal light changes from green to amber as you approach an intersection. What should you do?",
    "choices":[
   
      "Accelerate through as fast as you can",
      "Stop. If a stop cannot be made safely , proceed with caution.",
      "Honk your horn and speed up",
      "Yield the right of way"
    ],
    "correct": "Stop. If a stop cannot be made safely , proceed with caution.",
  
  }, 

  {
    "question": "When a driver is approaching an intersection that is blocked with traffic, what should the driver do?",
    "choices":[
   
      "Pass on the left or right",
      "Honk your horn and argue with other drivers",
      "Stop and wait until the traffic ahead moves on (or clears) before entering the intersection.",
      "Get out of you vehicle and direct traffic"
    ],
    "correct": "Stop and wait until the traffic ahead moves on (or clears) before entering the intersection.",
  
  }, 

  {
    "question": "What is a flashing yellow beacon above an intersection?",
    "choices":[
   
      "Pedestrian crossing ahead",
      "Warns drivers to proceed with caution.",
      "The light is changing to red soon",
      "The light is malfunctioning"
    ],
    "correct": "Warns drivers to proceed with caution.",
  
  }, 


  {
    "question": "What does a traffic signal with a red light and a green arrow indicates?",
    "choices":[
   
      "You must stop",
      "The light will change to red soon",
      "The traffic light is malfunctioning",
      "Motorists can proceed with caution in the direction of the arrow."
    ],
    "correct": "Motorists can proceed with caution in the direction of the arrow.",
  
  }, 

  {
    "question": "Which vehicle has the Right Of Way on a hill?",
    "choices":[
   
      "The vehicle that entered the hill first",
      "The vehicle coming down but the heavier/larger vehicle has the Right Of Way up or down.",
      "The vehicle going uphill.",
      "The more expensive vehicle."
    ],
    "correct": "The vehicle coming down but the heavier/larger vehicle has the Right Of Way up or down.",
  
  }, 

  {
    "question": "Who can be charged / ticketed with the violation if a 16 year old front seat passenger is not wearing a seat belt?",
    "choices":[
   
      "The 16 year old passenger.",
      "The parent",
      "The motor vehicle owner",
      "The driver"
    ],
    "correct": "The 16 year old passenger.",
  
  }, 

  {
    "question": "What does a stationery amber light mean ?",
    "choices":[
   
      "Proceed with caution",
      "Honk your horn and pass slowly",
      "Slow down and pass",
      "Stop"
    ],
    "correct": "Stop",
  
  }, 

  {
    "question": "What does a flashing red light means?",
    "choices":[
   
      "Slow down and pass",
      "Honk your horn and pass slowly",
      "Stop",
      "Proceed with caution"
    ],
    "correct": "Stop",
  
  }, 

  {
    "question": "What does a broken white line in the centre of the road mean?",
    "choices":[
   
      "No passing",
      "You may overtake safely if the way ahead is clear.",
      "Two way traffic begins",
      "Overtake at any time"
    ],
    "correct": "You may overtake safely if the way ahead is clear.",
  
  }, 

  {
    "question": "What does a white arrow painted on a lane means?",
    "choices":[
   
      "Lane is reserved for emergency vehicle",
      "You may move only in the direction of the arrow",
      "Priority lane",
      "Intersection ahead"
    ],
    "correct": "You may move only in the direction of the arrow",
  
  }, 

  {
    "question": "When approaching an intersection which has no stop line crosswalk or side walk. Where must drivers stop?",
    "choices":[
   
      "At the center of the road",
      "Nearest to the right of the lane",
      "At the edge of the intersection.",
      "Where the road ends"
    ],
    "correct": "At the edge of the intersection.",
  
  }, 

  {
    "question": "Unless turning right or passing another vehicle, how should drivers position their vehicle on the road?",
    "choices":[
   
      "In the center of the road to avoid potholes",
      "Drive on both sides to avoid traffic ahead",
      "Anywhere there is no oncoming traffic",
      "Keep to the left of the road or in the left hand lane on multi lane roads."
    ],
    "correct": "Keep to the left of the road or in the left hand lane on multi lane roads.",
  
  }, 

  {
    "question": "In good weather conditions, drivers are required to keep a safe distance behind the vehicle in front. What is a safe distance a driver should keep?",
    "choices":[
   
      "Two to three second distance behind the other vehicle,",
      "About 2-3 vehicles length apart",
      "A minimum of 6 second following distance",
      "Three feet behind the other vehicle"
    ],
    "correct": "Two to three second distance behind the other vehicle,",
  
  }, 

  {
    "question": "When descending a hill, what is a good, safe driving practice?",
    "choices":[
   
      "Shift to neutral gear and brake slowly",
      "Release the hand brake slowly ready to use",
      "Gear down, using the motor to assist in braking.",
      "Turn on your hazard lights and maintain your speed"
    ],
    "correct": "Gear down, using the motor to assist in braking.",
  
  }, 

  {
    "question": "What documents the police may require drivers to produce?",
    "choices":[
   
      "Valid drivers licence",
      "Insurance certificate",
      "Ownership papers for the vehicle being driven.",
      "All of the above"
    ],
    "correct": "All of the above",
  
  }, 

  {
    "question": "If your vehicle become disabled (have a breakdown ) on a highway. What should you do?",
    "choices":[
   
      "Park your car, get out and walk to get help nearby",
      "Pull over, turn on the emergency flashers and wait for help",
      "Honk your horn for help",
      "Get out and wave to passing motorists for help"
    ],
    "correct": "Pull over, turn on the emergency flashers and wait for help",
  
  }, 

  {
    "question": "Where and when should you dip your lights?",
    "choices":[
   
      "When you see your friends approaching",
      "Dip your lights in brightly lit areas, in built up areas, when facing on coming traffic and when approaching a corner /bend.",
      "To inform other motorist that law enforcement is around.",
      "When you approach a crowd."
    ],
    "correct": "Dip your lights in brightly lit areas, in built up areas, when facing on coming traffic and when approaching a corner /bend.",
  
  }, 

  {
    "question": "When two vehicles of a similar size meet on a hill, which one has the Right Of Way?",
    "choices":[
   
      "The vehicle that is going faster.",
      "The vehicle going uphill.",
      "The vehicle going downhill.",
      "The vehicle that entered the hill first."
    ],
    "correct": "The vehicle going downhill.",
  
  }, 

  {
    "question": "A flashing green light at an intersection where right and left turns are permitted indicates that drivers may------?",
    "choices":[
   
      "Turn right or left or go straight ahead if the way is clear.",
      "Wait until the light stop flashing",
      "Stop and proceed with caution",
      "The light is broken"
    ],
    "correct": "Turn right or left or go straight ahead if the way is clear.",
  
  }, 

  {
    "question": "What are the main causes of skidding?",
    "choices":[
   
      "Faulty driving.",
      "Uneven tyre pressure and smooth tyres,",
      "Slippery road surfaces and improper braking.",
      "All of the above"
    ],
    "correct": "All of the above",
  
  }, 

  {
    "question": "When involved in a reportable accident, what should you do?",
    "choices":[
   
      "Take photographs and measurement for future use.",
      "Report the accident to the nearest police within 24 hours.",
      "Call and tell your family",
      "Visit the police station 5 days after to produce your licence."
    ],
    "correct": "Report the accident to the nearest police within 24 hours.",
  
  }, 

  {
    "question": "What are the circumstances under which drivers could lose their drivers license?",
    "choices":[
   
      "Failure to pay traffic fines ordered by a court,",
      "dangerous driving , careless driving, reckless driving",
      "failing a breath test, speeding and demerit points",
      "all of the above"
    ],
    "correct": "all of the above",
  
  }, 

  {
    "question": "If your rear wheel skid while driving. What should you do?",
    "choices":[
   
      "Slam on your brakes",
      "Steer in the direction of the skid.",
      "Accelerate out of the skid.",
      "Hold the steering wheel tightly in one place."
    ],
    "correct": "Steer in the direction of the skid.",
  
  }, 

  {
    "question": "In what position of the road should your vehicle be before making a left turn?",
    "choices":[
   
      "In the center of the roadway",
      "In the lane nearest to the curb.",
      "In the right lane",
      "Facing on coming traffic"
    ],
    "correct": "In the lane nearest to the curb.",
  
  }, 

  
 ];
 
 /******* No need to edit below this line *********/
 var currentquestion = 0,
   score = 0,
   submt = true,
   picked;
 
 jQuery(document).ready(function($) {
 
   /**
    * HTML Encoding function for alt tags and attributes to prevent messy
    * data appearing inside tag attributes.
    */
   function htmlEncode(value) {
     return $(document.createElement('div')).text(value).html();
   }
 
   /**
    * This will add the individual choices for each question to the ul#choice-block
    *
    * @param {choices} array The choices from each question
    */
   function addChoices(choices) {
     if (typeof choices !== "undefined" && $.type(choices) == "array") {
       $('#choice-block').empty();
       for (var i = 0; i < choices.length; i++) {
         $(document.createElement('li')).addClass('choice choice-box').attr('data-index', i).text(choices[i]).appendTo('#choice-block');
       }
     }
   }
 
   /**
    * Resets all of the fields to prepare for next question
    */
   function nextQuestion() {
     submt = true;
     $('#explanation').empty();
     $('#question').text(quiz[currentquestion]['question']);
     $('#pager').text('Question ' + Number(currentquestion + 1) + ' of ' + quiz.length);
     if (quiz[currentquestion].hasOwnProperty('image') && quiz[currentquestion]['image'] != "") {
       if ($('#question-image').length == 0) {
         $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question'])).insertAfter('#question');
       } else {
         $('#question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question']));
       }
     } else {
       $('#question-image').remove();
     }
     addChoices(quiz[currentquestion]['choices']);
     setupButtons();
   }
 
   /**
    * After a selection is submitted, checks if its the right answer
    *
    * @param {choice} number The li zero-based index of the choice picked
    */
   function processQuestion(choice) {
     if (quiz[currentquestion]['choices'][choice] == quiz[currentquestion]['correct']) {
       $('.choice').eq(choice).css({
         'background-color': '#50D943'
       });
       $('#explanation').html('<strong>Correct!</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
       score++;
     } else {
       $('.choice').eq(choice).css({
         'background-color': '#D92623'
       });
       $('#explanation').html('<strong>Incorrect.</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
     }
     currentquestion++;
     $('#submitbutton').html('NEXT QUESTION &raquo;').on('click', function() {
       if (currentquestion == quiz.length) {
         endQuiz();
       } else {
         $(this).text('Check Answer').css({
           'color': '#222'
         }).off('click');
         nextQuestion();
       }
     })
   }
 
   /**
    * Sets up the event listeners for each button.
    */
   function setupButtons() {
     $('.choice').on('mouseover', function() {
       $(this).css({
         'background-color': '#e1e1e1'
       });
     });
     $('.choice').on('mouseout', function() {
       $(this).css({
         'background-color': '#fff'
       });
     })
     $('.choice').on('click', function() {
       picked = $(this).attr('data-index');
       $('.choice').removeAttr('style').off('mouseout mouseover');
       $(this).css({
         'border-color': '#222',
         'font-weight': 700,
         'background-color': '#c1c1c1'
       });
       if (submt) {
         submt = false;
         $('#submitbutton').css({
           'color': '#000'
         }).on('click', function() {
           $('.choice').off('click');
           $(this).off('click');
           processQuestion(picked);
         });
       }
     })
   }
 
   /**
    * Quiz ends, display a message.
    */
   function endQuiz() {
     $('#explanation').empty();
     $('#question').empty();
     $('#question-image').remove();
     $('#choice-block').empty();
     $('#submitbutton').remove();
     $('#question').text("You got " + score + " out of " + quiz.length + " correct.");
     $(document.createElement('h2')).css({
       'text-align': 'center',
       'font-size': '4em'
     }).text(Math.round(score / quiz.length * 100) + '%').insertAfter('#question');
    
     
   }
 
   /**
    * Runs the first time and creates all of the elements for the quiz
    */
   function init() {
     //add title
     if (typeof quiztitle !== "undefined" && $.type(quiztitle) === "string") {
       $(document.createElement('h1')).text(quiztitle).appendTo('#frame');
     } else {
       $(document.createElement('h1')).text("Quiz").appendTo('#frame');
     }
 
     //add pager and questions
     if (typeof quiz !== "undefined" && $.type(quiz) === "array") {
       //add pager
       $(document.createElement('p')).addClass('pager').attr('id', 'pager').text('Question 1 of ' + quiz.length).appendTo('#frame');
       //add first question
       $(document.createElement('h2')).addClass('question').attr('id', 'question').text(quiz[0]['question']).appendTo('#frame');
       //add image if present
       if (quiz[0].hasOwnProperty('image') && quiz[0]['image'] != "") {
         $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[0]['image']).attr('alt', htmlEncode(quiz[0]['question'])).appendTo('#frame');
       }
       $(document.createElement('p')).addClass('explanation').attr('id', 'explanation').html('&nbsp;').appendTo('#frame');
 
       //questions holder
       $(document.createElement('ul')).attr('id', 'choice-block').appendTo('#frame');
 
       //add choices
       addChoices(quiz[0]['choices']);
 
       //add submit button
       $(document.createElement('div')).addClass('choice-box').attr('id', 'submitbutton').text('Check Answer').css({
         'font-weight': 700,
         'color': '#222',
         'padding': '30px 0'
       }).appendTo('#frame');
 
       setupButtons();
     }
   }
 
   init();
 });