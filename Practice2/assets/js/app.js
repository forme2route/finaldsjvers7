// ** @ K


 var quiztitle = "Free Practice Test 2";

// Question and choices (image question)
 
 var quiz = [
  {
    "question": "Why is it important to wear a seatbelt while driving?",
       "choices":[
    
       "It will help you to stay in control in the event of a collision",
       "It will reduce your chance of serious injury if a crash occurs",
       "It is required by the law",
       "All of the above"
     ],
     "correct": "All of the above",

   }, 

   {
    "question": "When driving on wet or slippery surface, what should you do?",
   
    "choices":[
   
    "Maintain your usual speed",
    "Slow down and use caution",
    "Detour from the route",
    "Move to the right of the road",
    ],
    "correct": "Slow down and use caution",

  }, 

  {
    "question": "What is the nearest a driver may park to a fire hydrant?",
    
    "choices":[
   
      "As close as possible when not in use",
      "3M",
      "Anywhere during weekends",
      "Infront the hydrant when there is no emergency or siren is blaring"
    ],
    "correct": "3M",

  }, 

  {
   
    "question": "Motorists should never change lanes without?",
    "choices":[
   
      "Signaling and moving over",
      "Honking the horn",
      "Signaling, checking the mirrors and checking your blind spot",
      "Checking the rear view mirror"
    ],
    "correct": "Signaling, checking the mirrors and checking your blind spot",

  }, 

  {
    "question": "Ques: When and where must I stop whilst driving? Ans : When signalled to stop by a police officer, traffic warden or a school crossing patrolman. When an emergency vehicle with siren sounding is approaching. At a traffic light showing red or stationary amber. At stop signs At a pedestrian crossing when in use When involved in an accident",
    "choices":[
   
      "False",
      "True",
      "None of the above",
      "Some of the above"
    ],
    "correct": "True",
  
  }, 

  {
    "question": "Where is it unlawful to overtake and pass?",
    "choices":[
   
      "At an intersection and on an unbroken white line & On hills or curves.",
      "Where you see a “DO NOT PASS” or “NO OVERTAKING” sign.",
      "Within 100ft of a bridge, pedestrian crossing or railroad crossing.",
      "All of the above"
    ],
    "correct": "All of the above",
  
  }, 

  {
    "question": "When descending a hill, what is a good, safe driving practice?",
    "choices":[
   
      "Shift to neutral gear and brake slowly",
      "Release the hand brake slowly ready to use",
      "Gear down, using the motor to assist in braking.",
      "Turn on your hazard lights and maintain your speed"
    ],
    "correct": "Gear down, using the motor to assist in braking.",
  
  }, 

  {
    "question": "What should drivers do when they approach a stop sign at an intersection?",
    "choices":[
   
      "Slow down,honk your horn and proceed",
      "Stop.Proceed when it is safe to do so",
      "Slow down and if the way is clear proceed",
      "Slow down, look in all direction, then proceed"
    ],
    "correct": "Stop.Proceed when it is safe to do so",
  
  }, 

  {
    "question": "What does the law require ,if you hear the siren of an emergency vehicle",
    "choices":[
   
      "Signal the driver to stop",
      "Pull over as far as possible to the left and stop",
      "Speed up and get out of the way of the emergency vehicle",
      "Continue driving at the same speed"
    ],
    "correct": "Pull over as far as possible to the left and stop",
  
  }, 

  {
    "question": "Most skids are the result of .....?",
    "choices":[
   
      "Slippery roads",
      "Accelerating too quickly, driving too fast and braking too hard",
      "Worn tyres",
      "Worn brake pads"
    ],
    "correct": "Accelerating too quickly, driving too fast and braking too hard",
  
  }, 

  {
    "question": "What must you do before moving from a parked position?",
    "choices":[
   
      "Honk your horn and pull out from the curb quickly",
      "Signal and pull out from the curb quickly",
      "Signal, check for traffic, pull out only when it is safe to do so",
      "Look for incoming traffic then merge into passing traffic"
    ],
    "correct": "Signal, check for traffic, pull out only when it is safe to do so",
  
  }, 

  {
    "question": "If you have a breakdown on the highway, you should.....?",
    "choices":[
   
      "Park your car, get out and walk to get help nearby",
      "Pull over, turn on your emergency flashers, phone for help, wait for help",
      "Honk your horn for help",
      "Get out and wave to passing motorists for help"
    ],
    "correct": "Pull over, turn on your emergency flashers, phone for help, wait for help",
  
  }, 

  {
    "question": "Pedestrians using the roadway should normally walk...?",
    "choices":[
   
      "Between traffic",
      "With their back to traffic",
      "Facing on coming traffic",
      "On the solid white line in the centre of the road"
    ],
    "correct": "Facing on coming traffic",
  
  }, 

  {
    "question": "Unless you want to pass another vehicle or turn right, you should...?",
    "choices":[
   
      "Drive in the centre of the road",
      "Keep to the left of the road as much as possible",
      "Keep to the right of the road",
      "Drive on both sides of the road to move faster"
    ],
    "correct": "Keep to the left of the road as much as possible",
  
  }, 

  {
    "question": "What is the best way to ensure tha there are no vehicles in your blind spots?",
    "choices":[
   
      "sound your horn",
      "check your rearview mirrors",
      "do a shoulder check",
      "give the proper signal"
    ],
    "correct": "do a shoulder check",
  
  }, 

  {
    "question": "What is meant to Yield Right Of Way",
    "choices":[
   
      "To be tempted",
      "Turn to the right.",
      "To give way",
      "Make a sharp right turn"
    ],
    "correct": "To give way",
  
  }, 

  {
    "question": "If the signal light changes from green to amber as you approach an intersection. What should you do?",
    "choices":[
   
      "Accelerate through as fast as you can",
      "Stop. If a stop cannot be made safely , proceed with caution.",
      "Honk your horn and speed up",
      "Yield the right of way"
    ],
    "correct": "Stop. If a stop cannot be made safely , proceed with caution.",
  
  }, 

  {
    "question": "What does a white arrow painted on a lane means?",
    "choices":[
   
      "Lane is reserved for emergency vehicle",
      "You may move only in the direction of the arrow",
      "Priority lane",
      "Intersection ahead"
    ],
    "correct": "You may move only in the direction of the arrow",
  
  }, 

  {
    "question": "A flashing green light at an intersection where right and left turns are permitted indicates that drivers may------?",
    "choices":[
   
      "Turn right or left or go straight ahead if the way is clear.",
      "Wait until the light stop flashing",
      "Stop and proceed with caution",
      "The light is broken"
    ],
    "correct": "Turn right or left or go straight ahead if the way is clear.",
  
  }, 

  {
    "question": "What does a solid line to the right of the lane mean:?",
    "choices":[
   
      "You should not overtake",
      "It is unsafe to pass.",
      "Overtaking is prohibited",
      "All of the above"
    ],
    "correct": "All of the above",
  
  }, 

  {
    "question": "Always be aware of traffic around you as you drive, check your mirrors every............... or so?",
    "choices":[
   
      "10 seconds",
      "5 seconds",
      "Minute",
      "5 minutes"
    ],
    "correct": "5 seconds",
  
  }, 

  {
    "question": "Upon approaching a yield sign, what does the law and rules require drivers to do?",
    "choices":[
   
      "Honk your horn and indicate to join the line",
      "Slow down, stop if necessary, and proceed only when the way is clear.",
      "Maintain your speed",
      "Accelerate and merge with the traffic."
    ],
    "correct": "Slow down, stop if necessary, and proceed only when the way is clear.",
  
  }, 

  {
    "question": "Who can be charged / ticketed with the violation if a 14 years old front seat passenger is not wearing a seat belt?",
    "choices":[
   
      "The parent",
      "The motor vehicle owner",
      "The driver",
      "The 14 year old passenger"
    ],
    "correct": "The driver",
  
  }, 

  {
    "question": "What is the maximum speed limit for cars on the roads in Jamaica?",
    "choices":[
   
      "110 km/h",
      "80km/h (50mp/h)",
      "50km/h",
      "80 mph"
    ],
    "correct": "80km/h (50mp/h)",
  
  }, 

  
 ];
 
 /******* No need to edit below this line *********/
 var currentquestion = 0,
   score = 0,
   submt = true,
   picked;
 
 jQuery(document).ready(function($) {
 
   /**
    * HTML Encoding function for alt tags and attributes to prevent messy
    * data appearing inside tag attributes.
    */
   function htmlEncode(value) {
     return $(document.createElement('div')).text(value).html();
   }
 
   /**
    * This will add the individual choices for each question to the ul#choice-block
    *
    * @param {choices} array The choices from each question
    */
   function addChoices(choices) {
     if (typeof choices !== "undefined" && $.type(choices) == "array") {
       $('#choice-block').empty();
       for (var i = 0; i < choices.length; i++) {
         $(document.createElement('li')).addClass('choice choice-box').attr('data-index', i).text(choices[i]).appendTo('#choice-block');
       }
     }
   }
 
   /**
    * Resets all of the fields to prepare for next question
    */
   function nextQuestion() {
     submt = true;
     $('#explanation').empty();
     $('#question').text(quiz[currentquestion]['question']);
     $('#pager').text('Question ' + Number(currentquestion + 1) + ' of ' + quiz.length);
     if (quiz[currentquestion].hasOwnProperty('image') && quiz[currentquestion]['image'] != "") {
       if ($('#question-image').length == 0) {
         $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question'])).insertAfter('#question');
       } else {
         $('#question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question']));
       }
     } else {
       $('#question-image').remove();
     }
     addChoices(quiz[currentquestion]['choices']);
     setupButtons();
   }
 
   /**
    * After a selection is submitted, checks if its the right answer
    *
    * @param {choice} number The li zero-based index of the choice picked
    */
   function processQuestion(choice) {
     if (quiz[currentquestion]['choices'][choice] == quiz[currentquestion]['correct']) {
       $('.choice').eq(choice).css({
         'background-color': '#50D943'
       });
       $('#explanation').html('<strong>Correct!</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
       score++;
     } else {
       $('.choice').eq(choice).css({
         'background-color': '#D92623'
       });
       $('#explanation').html('<strong>Incorrect.</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
     }
     currentquestion++;
     $('#submitbutton').html('NEXT QUESTION &raquo;').on('click', function() {
       if (currentquestion == quiz.length) {
         endQuiz();
       } else {
         $(this).text('Check Answer').css({
           'color': '#222'
         }).off('click');
         nextQuestion();
       }
     })
   }
 
   /**
    * Sets up the event listeners for each button.
    */
   function setupButtons() {
     $('.choice').on('mouseover', function() {
       $(this).css({
         'background-color': '#e1e1e1'
       });
     });
     $('.choice').on('mouseout', function() {
       $(this).css({
         'background-color': '#fff'
       });
     })
     $('.choice').on('click', function() {
       picked = $(this).attr('data-index');
       $('.choice').removeAttr('style').off('mouseout mouseover');
       $(this).css({
         'border-color': '#222',
         'font-weight': 700,
         'background-color': '#c1c1c1'
       });
       if (submt) {
         submt = false;
         $('#submitbutton').css({
           'color': '#000'
         }).on('click', function() {
           $('.choice').off('click');
           $(this).off('click');
           processQuestion(picked);
         });
       }
     })
   }
 
   /**
    * Quiz ends, display a message.
    */
   function endQuiz() {
     $('#explanation').empty();
     $('#question').empty();
     $('#question-image').remove();
     $('#choice-block').empty();
     $('#submitbutton').remove();
     $('#question').text("You got " + score + " out of " + quiz.length + " correct.");
     $(document.createElement('h2')).css({
       'text-align': 'center',
       'font-size': '4em'
     }).text(Math.round(score / quiz.length * 100) + '%').insertAfter('#question');
    
     
   }
 
   /**
    * Runs the first time and creates all of the elements for the quiz
    */
   function init() {
     //add title
     if (typeof quiztitle !== "undefined" && $.type(quiztitle) === "string") {
       $(document.createElement('h1')).text(quiztitle).appendTo('#frame');
     } else {
       $(document.createElement('h1')).text("Quiz").appendTo('#frame');
     }
 
     //add pager and questions
     if (typeof quiz !== "undefined" && $.type(quiz) === "array") {
       //add pager
       $(document.createElement('p')).addClass('pager').attr('id', 'pager').text('Question 1 of ' + quiz.length).appendTo('#frame');
       //add first question
       $(document.createElement('h2')).addClass('question').attr('id', 'question').text(quiz[0]['question']).appendTo('#frame');
       //add image if present
       if (quiz[0].hasOwnProperty('image') && quiz[0]['image'] != "") {
         $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[0]['image']).attr('alt', htmlEncode(quiz[0]['question'])).appendTo('#frame');
       }
       $(document.createElement('p')).addClass('explanation').attr('id', 'explanation').html('&nbsp;').appendTo('#frame');
 
       //questions holder
       $(document.createElement('ul')).attr('id', 'choice-block').appendTo('#frame');
 
       //add choices
       addChoices(quiz[0]['choices']);
 
       //add submit button
       $(document.createElement('div')).addClass('choice-box').attr('id', 'submitbutton').text('Check Answer').css({
         'font-weight': 700,
         'color': '#222',
         'padding': '30px 0'
       }).appendTo('#frame');
 
       setupButtons();
     }
   }
 
   init();
 });