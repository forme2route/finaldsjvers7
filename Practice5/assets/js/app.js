// ** @ K


 var quiztitle = "Free Practice Test 5";

// Question and choices (image question)
 
 var quiz = [
 
  {
    "question": "When a police officer signals you to pull your vehicle over you must..?",
    "choices":[
   
      "Slow down and pull over as far to the right and stop",
      "Continue driving to the nearest parking spot ,then stop.",
      "Stop immediately in the lane you were driving.",
      "Pull over as far as possible to the left as you safely can and come to a complete stop."
    ],
    "correct": "Pull over as far as possible to the left as you safely can and come to a complete stop.",
  
  }, 

  {
    "question": "Upon approaching a yield sign, what does the law and rules require drivers to do?",
    "choices":[
   
      "Honk your horn and indicate to join the line",
      "Slow down, stop if necessary, and proceed only when the way is clear.",
      "Maintain your speed",
      "Accelerate and merge with the traffic"
    ],
    "correct": "Slow down, stop if necessary, and proceed only when the way is clear.",
  
  }, 

  {
    "question": "What should motorists do when they hear the siren of an emergency vehicle?",
    "choices":[
   
      "Stop immediately in the lane you are driving",
      "Continue driving ahead until the siren stops.",
      "Safely pull over to as far as possible to the left and stop.",
      "Accelerate and race ahead to avoid stopping."
    ],
    "correct": "Safely pull over to as far as possible to the left and stop.",
  
  }, 

  {
    "question": "What should you do firstly, before you turn, change lanes or overtake ?",
    "choices":[
   
      "Check your rearview mirrors,",
      "give the correct signals",
      "check your blind spots, then proceed safely.",
      "All of the above"
    ],
    "correct": "All of the above",
  
  }, 

  {
    "question": "If the traffic signal changes while a pedestrian is still on the street ,who has the right of way?",
    "choices":[
   
      "The motorist facing the green light",
      "The pedestrian",
      "No one",
      "Vehicles turning on the light"
    ],
    "correct": "The pedestrian",
  
  }, 

  {
    "question": "What is meant to Yield Right Of Way",
    "choices":[
   
      "To be tempted",
      "Turn to the right.",
      "To give way",
      "Make a sharp right turn"
    ],
    "correct": "To give way",
  
  }, 

  {
    "question": "How far are you permitted to travel behind an emergency vehicle?",
    "choices":[
   
      "5 feet",
      "500 feet (150m)",
      "Any distance behind.",
      "2-4 cars length"
    ],
    "correct": "500 feet (150m)",
  
  }, 

  {
    "question": "What precautions should you take when approaching a roundabout?",
    "choices":[
   
      "Make sure the traffic stops to let you in",
      "Give the correct signal early",
      "Merge with the flow of traffic at a reduced speed.",
      "Honk your horn to make sure other motorist see you."
    ],
    "correct": "Merge with the flow of traffic at a reduced speed.",
  
  }, 

  {
    "question": "Ques: Can I be arrested for committing a traffic offence? Ans : Yes. You can be arrested for committing certain traffic offences such as dangerous driving, reckless driving, driving away a motor vehicle without the owner’s consent, and giving a false name and address etc.",
    "choices":[
   
      "False",
      "True",
      "Some of the above.",
      "None of the above"
    ],
    "correct": "True",
  
  }, 



  {
    "question": "What is an intersection?",
    "choices":[
   
      "Entrance to an highway",
      "At a school or pedestrian crossing",
      "Where two or more streets meet or cross",
      "All of the above"
    ],
    "correct": "Where two or more streets meet or cross",
  
  }, 
  {
    "question": "Ques: When and where must I stop whilst driving? Ans : When signalled to stop by a police officer, traffic warden or a school crossing patrolman. When an emergency vehicle with siren sounding is approaching. At a traffic light showing red or stationary amber. At stop signs At a pedestrian crossing when in use When involved in an accident",
    "choices":[
   
      "False",
      "True",
      "None of the above",
      "Some of the above"
    ],
    "correct": "True",
  
  }, 
  {
    "question": "What does a flashing amber light mean?",
    "choices":[
   
      "The light will change to red soon",
      "Drivers should proceed with caution",
      "The light is broken",
      "Stop"
    ],
    "correct": "Drivers should proceed with caution",
  
  }, 
  {
    "question": "Who can be charged / ticketed with the violation if a 14 years old front seat passenger is not wearing a seat belt?",
    "choices":[
   
      "The parent",
      "The motor vehicle owner",
      "The driver",
      "The 14 year old passenger"
    ],
    "correct": "The driver",
  
  }, 
  {
    "question": "What is the maximum speed limit for cars on the roads in Jamaica?",
    "choices":[
   
      "110 km/h",
      "80km/h (50mp/h)",
      "50km/h",
      "80 mph"
    ],
    "correct": "80km/h (50mp/h)",
  
  }, 
  {
    "question": "How far are you permitted to reverse on a main road?",
    "choices":[
   
      "200m",
      "Within 500m",
      "As far possible",
      "Only as far as is necessary"
    ],
    "correct": "As far possible",
  
  }, 
  {
    "question": "What should you do if/when you are being overtaken?",
    "choices":[
   
      "Speed up",
      "Maintain your speed",
      "Slow down",
      "Do not allow to be overtaken"
    ],
    "correct": "Maintain your speed",
  
  }, 
  {
    "question": "Where is it unlawful to overtake and pass?",
    "choices":[
   
      "At an intersection and on an unbroken white line or on hills or curves. ",
      "Where you see a “DO NOT PASS” or “NO OVERTAKING” sign.",
      "Within 100ft of a bridge, pedestrian crossing or railroad crossing.",
      "All of the above"
    ],
    "correct": "All of the above",
  
  }, 
  {
    "question": "Ques: Who has the right of way at a round about? Ans : No one has the right of way at a round- about. Always approach a round-about with caution and yield right of way to vehicles which are already in the round-about",
    "choices":[
   
      "False",
      "True",
      "Pedestrians",
      "Cyclists"
    ],
    "correct": "True",
  
  }, 
  {
    "question": "If you must park on a hill facing downwards, what safety precautions should you take ?",
    "choices":[
   
      "Remove your keys from the ignition",
      "Lock the steering wheel towards the kerb and select reverse gear or a low gear. Engage the parking brake.",
      "Turn on the hazard lights",
      "Lock your windows and doors."
    ],
    "correct": "Lock the steering wheel towards the kerb and select reverse gear or a low gear. Engage the parking brake.",
  
  }, 
  {
    "question": "What is the safest action to take when your vehicle skids?",
    "choices":[
   
      "Accelerate",
      "Hold on tightly to the steering wheel and wait for it to end",
      "Calmly remove your foot from the accelerator and steer in the direction you want to go.",
      "Slam on your brakes"
    ],
    "correct": "Calmly remove your foot from the accelerator and steer in the direction you want to go.",
  
  }, 
  {
    "question": "Why must you use signals when turning?",
    "choices":[
   
      "To make faster turns",
      "To notify other road users of your intentions.",
      "Lights are needed to make smooth turns",
      "To yield the Right of Way"
    ],
    "correct": "To notify other road users of your intentions.",
  
  }, 
  {
    "question": "Always be aware of traffic around you as you drive, check your mirrors every............... or so?",
    "choices":[
   
      "10 seconds",
      "5 seconds",
      "Minute",
      "5 minutes"
    ],
    "correct": "5 seconds",
  
  }, 
  {
    "question": "What should a driver do if he/she feels drowsy while driving?",
    "choices":[
   
      "Open your windows",
      "Increase the volume on your radio",
      "Pull over and stop in a safe area and rest.",
      "Reduce your speed"
    ],
    "correct": "Pull over and stop in a safe area and rest.",
  
  }, 
  {
    "question": "In Jamaica ,you must wear a seatbelt ..............?",
    "choices":[
   
      "When approaching law enforcement",
      "For long trips",
      "For the driving test only",
      "At all times."
    ],
    "correct": "At all times.",
  
  }, 

 
 
 
 ];
 
 /******* No need to edit below this line *********/
 var currentquestion = 0,
   score = 0,
   submt = true,
   picked;
 
 jQuery(document).ready(function($) {
 
   /**
    * HTML Encoding function for alt tags and attributes to prevent messy
    * data appearing inside tag attributes.
    */
   function htmlEncode(value) {
     return $(document.createElement('div')).text(value).html();
   }
 
   /**
    * This will add the individual choices for each question to the ul#choice-block
    *
    * @param {choices} array The choices from each question
    */
   function addChoices(choices) {
     if (typeof choices !== "undefined" && $.type(choices) == "array") {
       $('#choice-block').empty();
       for (var i = 0; i < choices.length; i++) {
         $(document.createElement('li')).addClass('choice choice-box').attr('data-index', i).text(choices[i]).appendTo('#choice-block');
       }
     }
   }
 
   /**
    * Resets all of the fields to prepare for next question
    */
   function nextQuestion() {
     submt = true;
     $('#explanation').empty();
     $('#question').text(quiz[currentquestion]['question']);
     $('#pager').text('Question ' + Number(currentquestion + 1) + ' of ' + quiz.length);
     if (quiz[currentquestion].hasOwnProperty('image') && quiz[currentquestion]['image'] != "") {
       if ($('#question-image').length == 0) {
         $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question'])).insertAfter('#question');
       } else {
         $('#question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question']));
       }
     } else {
       $('#question-image').remove();
     }
     addChoices(quiz[currentquestion]['choices']);
     setupButtons();
   }
 
   /**
    * After a selection is submitted, checks if its the right answer
    *
    * @param {choice} number The li zero-based index of the choice picked
    */
   function processQuestion(choice) {
     if (quiz[currentquestion]['choices'][choice] == quiz[currentquestion]['correct']) {
       $('.choice').eq(choice).css({
         'background-color': '#50D943'
       });
       $('#explanation').html('<strong>Correct!</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
       score++;
     } else {
       $('.choice').eq(choice).css({
         'background-color': '#D92623'
       });
       $('#explanation').html('<strong>Incorrect.</strong> ' + htmlEncode(quiz[currentquestion]['explanation']));
     }
     currentquestion++;
     $('#submitbutton').html('NEXT QUESTION &raquo;').on('click', function() {
       if (currentquestion == quiz.length) {
         endQuiz();
       } else {
         $(this).text('Check Answer').css({
           'color': '#222'
         }).off('click');
         nextQuestion();
       }
     })
   }
 
   /**
    * Sets up the event listeners for each button.
    */
   function setupButtons() {
     $('.choice').on('mouseover', function() {
       $(this).css({
         'background-color': '#e1e1e1'
       });
     });
     $('.choice').on('mouseout', function() {
       $(this).css({
         'background-color': '#fff'
       });
     })
     $('.choice').on('click', function() {
       picked = $(this).attr('data-index');
       $('.choice').removeAttr('style').off('mouseout mouseover');
       $(this).css({
         'border-color': '#222',
         'font-weight': 700,
         'background-color': '#c1c1c1'
       });
       if (submt) {
         submt = false;
         $('#submitbutton').css({
           'color': '#000'
         }).on('click', function() {
           $('.choice').off('click');
           $(this).off('click');
           processQuestion(picked);
         });
       }
     })
   }
 
   /**
    * Quiz ends, display a message.
    */
   function endQuiz() {
     $('#explanation').empty();
     $('#question').empty();
     $('#question-image').remove();
     $('#choice-block').empty();
     $('#submitbutton').remove();
     $('#question').text("You got " + score + " out of " + quiz.length + " correct.");
     $(document.createElement('h2')).css({
       'text-align': 'center',
       'font-size': '4em'
     }).text(Math.round(score / quiz.length * 100) + '%').insertAfter('#question');
    
     
   }
 
   /**
    * Runs the first time and creates all of the elements for the quiz
    */
   function init() {
     //add title
     if (typeof quiztitle !== "undefined" && $.type(quiztitle) === "string") {
       $(document.createElement('h1')).text(quiztitle).appendTo('#frame');
     } else {
       $(document.createElement('h1')).text("Quiz").appendTo('#frame');
     }
 
     //add pager and questions
     if (typeof quiz !== "undefined" && $.type(quiz) === "array") {
       //add pager
       $(document.createElement('p')).addClass('pager').attr('id', 'pager').text('Question 1 of ' + quiz.length).appendTo('#frame');
       //add first question
       $(document.createElement('h2')).addClass('question').attr('id', 'question').text(quiz[0]['question']).appendTo('#frame');
       //add image if present
       if (quiz[0].hasOwnProperty('image') && quiz[0]['image'] != "") {
         $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[0]['image']).attr('alt', htmlEncode(quiz[0]['question'])).appendTo('#frame');
       }
       $(document.createElement('p')).addClass('explanation').attr('id', 'explanation').html('&nbsp;').appendTo('#frame');
 
       //questions holder
       $(document.createElement('ul')).attr('id', 'choice-block').appendTo('#frame');
 
       //add choices
       addChoices(quiz[0]['choices']);
 
       //add submit button
       $(document.createElement('div')).addClass('choice-box').attr('id', 'submitbutton').text('Check Answer').css({
         'font-weight': 700,
         'color': '#222',
         'padding': '30px 0'
       }).appendTo('#frame');
 
       setupButtons();
     }
   }
 
   init();
 });